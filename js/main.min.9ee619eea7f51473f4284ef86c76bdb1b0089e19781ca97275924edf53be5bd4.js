var lastCallTs=0;function warmUp(){var t=(new Date).getTime();if(t-lastCallTs>14*60*1e3){const e=new XMLHttpRequest;e.open("GET",searchUrl+"ping"),e.setRequestHeader("X-API-Key",apiKey),e.send(),lastCallTs=t}}function sendData(e){if(e.get("q").replace(/\s/g,"").length==0)return;const t=new XMLHttpRequest;var s,n=[];for(s of e.entries())n.push(encodeURIComponent(s[0])+"="+encodeURIComponent(s[1]));t.addEventListener("load",function(e){if(document.getElementById("inputSearch").disabled=!1,document.getElementById("buttonSubmitSearch").disabled=!1,document.getElementById("iconSearch").classList="fa fa-search",document.getElementById("inputSearchMobile").disabled=!1,document.getElementById("buttonSubmitSearchMobile").disabled=!1,document.getElementById("iconSearchMobile").classList="fa fa-search",e.target.status!=200){var n,s,t='<div class="search-results"><h1 class="title">Uh oh</h1>';t+="<p>A technical error occurred; Please try again later.",t+="</div>",document.getElementById("main-content").innerHTML=t}else{if(s=JSON.parse(e.target.responseText),t='<div class="search-results"><h1 class="title">Search Results</h1>',s.results.length>0)for(n of s.results)t+='<div class="post"><div class="meta">'+n.publicationdate+'</div><h4 class="summary"><a href="'+n.uri+'">'+n.title+'</a></h4><div><span class="description">'+n.fragment+"</span></div></div>";else t+='<div class="post">No results found</div>';t+="</div>"}document.getElementById("main-content").innerHTML=t}),t.addEventListener("error",function(e){document.getElementById("inputSearch").disabled=!1,document.getElementById("buttonSubmitSearch").disabled=!1,document.getElementById("iconSearch").classList="fa fa-search",document.getElementById("inputSearchMobile").disabled=!1,document.getElementById("buttonSubmitSearchMobile").disabled=!1,document.getElementById("iconSearchMobile").classList="fa fa-search";var t='<div class="search-results"><h1 class="title">Uh oh</h1>';t+="<p>A technical error occurred; Please try again later.",t+="</div>",document.getElementById("main-content").innerHTML=t,console.log("Request failed:"+e)}),t.open("GET",searchUrl+"search?"+n.join("&")),t.setRequestHeader("X-API-Key",apiKey),t.send(),document.getElementById("inputSearch").disabled=!0,document.getElementById("buttonSubmitSearch").disabled=!0,document.getElementById("iconSearch").classList="fa fa-spinner",document.getElementById("inputSearchMobile").disabled=!0,document.getElementById("buttonSubmitSearchMobile").disabled=!0,document.getElementById("iconSearchMobile").classList="fa fa-spinner",lastCallTs=(new Date).getTime()}